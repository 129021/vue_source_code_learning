{"version":3,"file":"vue.js","sources":["../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["// 此文件专门用于状态初始化\r\n\r\nimport { observe } from \"./observe/index\";\r\n\r\n\r\nexport function initState(vm) {\r\n    const opts = vm.$options //获取所有的选项\r\n\r\n    if (opts.data) {\r\n        initData(vm)\r\n    }\r\n\r\n    // if(opts.props){\r\n    //     initProps()\r\n    // }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data; //data可能是函数，也可能是对象\r\n\r\n    data = typeof data === 'function' ? data.call(vm) : data\r\n\r\n\r\n    console.log(data);\r\n\r\n    //    对数据进行劫持\r\n    // Vue2里面采用了一个 API Object.defineProperty\r\n    observe(data)\r\n\r\n\r\n}","import { initState } from \"./state\";\r\n\r\n// 此函数用于Vue的初始化操作\r\n// 专门用于初始化\r\n\r\n\r\n// 这是用于给Vue增加init方法\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n\r\n\r\n\r\n        // vue 的实例 vm身上有一个 vm.$options 就是获取用户的配置\r\n        // this.$options=options\r\n        // 这里不用this，而是用vm\r\n        const vm = this;\r\n        vm.$options = options; //将用户的选项挂载到实例上\r\n\r\n\r\n        // 初始化状态（包括props，data，computed，watch等）\r\n        initState(vm)\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n// function initState(vm) {\r\n//     const opts = vm.$options //获取所有的选项\r\n\r\n//     if (opts.data) {\r\n//         initData(vm)\r\n//     }\r\n\r\n//     // if(opts.props){\r\n//     //     initProps()\r\n//     // }\r\n\r\n\r\n// }\r\n\r\n\r\n\r\n// function initData(vm) {\r\n//     let data = vm.$options.data; //data可能是函数，也可能是对象\r\n\r\n//    data= typeof data === 'function' ? data.call(vm) : data \r\n\r\n\r\n//    console.log(data);\r\n\r\n\r\n// }","import { initMixin } from \"./init\"\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\n\r\ninitMixin(Vue); //扩展了Init方法\r\nexport default Vue"],"names":["initState","vm","opts","$options","data","initData","call","console","log","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;IAAA;IAKO,SAASA,SAAT,CAAmBC,EAAnB,EAAuB;IAC1B,EAAA,IAAMC,IAAI,GAAGD,EAAE,CAACE,QAAhB,CAD0B;;MAG1B,IAAID,IAAI,CAACE,IAAT,EAAe;QACXC,QAAQ,CAACJ,EAAD,CAAR,CAAA;IACH,GALyB;IAQ1B;IACA;;IAGH,CAAA;;IAID,SAASI,QAAT,CAAkBJ,EAAlB,EAAsB;MAClB,IAAIG,IAAI,GAAGH,EAAE,CAACE,QAAH,CAAYC,IAAvB,CADkB;;IAGlBA,EAAAA,IAAI,GAAG,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,IAAI,CAACE,IAAL,CAAUL,EAAV,CAA7B,GAA6CG,IAApD,CAAA;IAGAG,EAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EANkB;IAarB;;IC/BD;IAGA;;IACO,SAASK,SAAT,CAAmBC,GAAnB,EAAwB;IAC3BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;IAIrC;IACA;IACA;QACA,IAAMZ,EAAE,GAAG,IAAX,CAAA;IACAA,IAAAA,EAAE,CAACE,QAAH,GAAcU,OAAd,CARqC;IAWrC;;QACAb,SAAS,CAACC,EAAD,CAAT,CAAA;OAZJ,CAAA;IAeH;IAKD;IAEA;IACA;IACA;IAEA;IACA;IACA;IAGA;IAIA;IACA;IAEA;IAGA;IAGA;;IClDA,SAASS,GAAT,CAAaG,OAAb,EAAsB;MAClB,IAAKD,CAAAA,KAAL,CAAWC,OAAX,CAAA,CAAA;IACH,CAAA;;IAEDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}